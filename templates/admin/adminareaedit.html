<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Edit Area</title>
    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <link rel="stylesheet" th:href="@{/css/admin/common.css}" />
</head>
<body>
<div class="container">
    <h1>Edit Area</h1>

    <div th:if="${area == null}">Area not found.</div>

    <div th:if="${area != null}">
        <form th:action="@{/admin/adminareaedit}" th:object="${area}" method="post">
            <!-- Hidden ID for submission -->
            <div class="form-group">
                <label for="id">Area ID</label>
                <input type="text" id="id" th:field="*{areaId}" readonly class="readonly" />
            </div>

            <div class="form-group">
                <label for="name">Area Name *</label>
                <input type="text" id="name" th:field="*{areaname}" required />
                <input type="hidden" id="areanameChangedHidden" th:field="*{areanameChanged}" value="false" />
            </div>

            <div class="form-group">
                <label for="desc">Description</label>
                <textarea id="desc" th:field="*{description}"></textarea>
                <input type="hidden" id="descriptionChangedHidden" th:field="*{descriptionChanged}" value="false" />
            </div>

            <div class="form-group">
                <label for="thumb">Thumbnail URI</label>
                <input type="checkbox" id="thumbCheckbox" th:field="*{thumbnailChanged}" />
                <img th:if="*{thumbnailUri != null}" th:src="*{thumbnailUri}" alt="Thumbnail" class="thumbnail-preview" />
                <input type="file" id="thumbnailfile" name="thumbnailfile" accept="image/*" th:field="*{thumbnailfile}">
            </div>

            <div class="form-group">
                <label for="kml">KML URI</label>
                <input type="checkbox" id="kmlCheckbox"th:field="*{kmlChanged}" value="false" />
                <input type="file" id="kmlfile" name="kmlfile" accept=".kml" th:field="*{kmlfile}">
            </div>

            <fieldset>
                <legend>最大範囲 (auto-generated by server)</legend>
                <div class="form-row">
                    <div class="form-group">
                        <label for="minLat">Min Latitude</label>
                        <input type="number" id="minLat" th:field="*{minLat}" step="0.00001" readonly class="readonly" />
                    </div>
                    <div class="form-group">
                        <label for="maxLat">Max Latitude</label>
                        <input type="number" id="maxLat" th:field="*{maxLat}" step="0.00001" readonly class="readonly" />
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="minLon">Min Longitude</label>
                        <input type="number" id="minLon" th:field="*{minLon}" step="0.00001" readonly class="readonly" />
                    </div>
                    <div class="form-group">
                        <label for="maxLon">Max Longitude</label>
                        <input type="number" id="maxLon" th:field="*{maxLon}" step="0.00001" readonly class="readonly" />
                    </div>
                </div>
            </fieldset>

            <div class="info-row">
                <span><strong>Created</strong></span>
                <span th:text="${area.createdAt}">createdAt</span>
            </div>
            <div class="info-row">
                <span><strong>Updated</strong></span>
                <span th:text="${area.updatedAt}">updatedAt</span>
            </div>

            <div class="actions">
                <button type="button" id="submitBtn">Save Changes</button>
                <a href="javascript:history.back()">Cancel</a>
            </div>
        </form>
        <form id="requestform" th:action="@{/admin/adminareaedit}" th:object="${request}" method="post">
            <input type="hidden" name="areaId" th:field="*{areaId}"/>
            <input type="hidden" name="areanameChanged" th:field="*{areanameChanged}"/>
            <input type="hidden" name="areaname" th:field="*{areaname}"/>
            <input type="hidden" name="descriptionChanged" th:field="*{descriptionChanged}"/>
            <input type="hidden" name="description" th:field="*{description}"/>
            <input type="hidden" name="thumbnailChanged" th:field="*{thumbnailChanged}"/>
            <input type="hidden" name="thumbnailfile" th:field="*{thumbnailfile}"/>
            <input type="hidden" name="kmlChanged" th:field="*{kmlChanged}"/>
            <input type="hidden" name="kmlfile" th:field="*{kmlfile}"/>
        </form>

    </div>
</div>
<script th:src="@{/js/admin/adminareaedit.js}"></script>
</body>
</html>
